// Generated by CoffeeScript 1.3.1
(function() {
  var CP, Util, spawn, _;

  _ = require("underscore");

  CP = require("child_process");

  Util = require('util');

  spawn = require('child_process').spawn;

  exports.exec = function(command, cb) {
    return CP.exec(command, function(err, stdout, stderr) {
      if (!_.isEmpty(stdout)) {
        console.log("STDOUT", stdout);
      }
      if (!_.isEmpty(stderr)) {
        err = stderr;
      }
      return cb(err);
    });
  };

  exports.pushExec = function(command, args, wd, cb) {
    var cmd, cwd;
    if (arguments.length === 3) {
      cb = wd;
      wd = null;
    }
    if (wd) {
      cwd = process.cwd();
      process.chdir(wd);
    }
    cmd = spawn(command, args);
    cmd.stdout.on('data', function(data) {
      return console.log(data.toString());
    });
    cmd.stderr.on('data', function(data) {
      return console.error(data.toString());
    });
    return cmd.on('exit', function(code) {
      if (wd) {
        process.chdir(cwd);
      }
      return cb(code);
    });
  };

}).call(this);
